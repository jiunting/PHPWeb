<html>
<head>
       <title>Find EQ PHP-MySQL Program</title>
</head>

<style>
input.inp1 {
    width: 50px;
    padding: 2px;
    margin-top: 0em;
    margin-left: 1.5em;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
}
input.inp2 {
    width: 50px;
    padding: 2px;
    margin-top: 1em;
    margin-bottom: 1em;
    margin-left: 5.0em;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
}
input.inp3 {
    width: 140px;
    padding: 0px;
    margin-top: 0em;
    margin-left: 0.5em;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
}
li.font1{
    font-size: 20px;
}
p1{
    font-size: 18px;
}
</style>


<body bgcolor="white">

<!--<h3>Connecting to DB using MySQL/PHP</h3>-->
<h2 style="align:center">Global earthquakes and seismic stations DB</h2>
<ul>
  <li class=font1> 226,410 events with M3.0+ since 2010</li>
  <li class=font1> 992 networks and 57,575 stations</li>
  <li class=font1> 8,173,763 event-station pairs </li>
</ul>
<img src="Fig1_map.png" width="100%" >

<p>
<!--This page is generated by PHP -->
<hr>

<p>
Search earthquakes by State. Please select a State code below.

<?php
// connect to DB to generate selection automatically
include('connectionData.txt');
$conn = mysqli_connect($server, $user, $pass, $dbname, $port)
or die('Error connecting to MySQL server.');

// query manu_name for select options
$query = "SELECT ID FROM state ;";
$result = mysqli_query($conn, $query)
or die(mysqli_error($conn));


// make select options
print "<form action='findEQbyState.php' method='POST'>";
print "<select name='input'>";
print "<optgroup label='State ID'>";
while($row = mysqli_fetch_array($result, MYSQLI_BOTH))
  {
    print "<option>$row[ID]</option>";
  }
print "</optgroup>";
print "</select>";
mysqli_free_result($result);
mysqli_close($conn);
print "<input type='submit' value='submit' style='margin-left: 0.5em;'>";
print "</form>";

?>

<p>
<hr>

<p>
Find out number of earthquakes in each state in a given time period.
<form action="findEQNumPerState.php" method="POST">
<p1>startTime &emsp;&emsp;&emsp;&emsp;&emsp;&emsp; endTime </br>
<input class="inp3" type="date" name="min_t" value="2010-01-01"> <a>&emsp;~ <input class="inp3" type="date" name="max_t" value="2021-12-31"> <br><br>
<input type="submit" value="submit">
</form>


<p>
<hr>
<p>
Search earthquakes by the following filters. Please enter the text below.

<form action="findEQbyMultifilt.php" method="POST">
<p1>min. magnitude &emsp; max. magnitude </br>
<input class="inp1" type="text" name="min_mag" value="0.0"> <a>&emsp;~ <input class="inp1" type="text" name="max_mag" value="10.0"> <br>
<p1>lon. lat. range </br>
<input class="inp2" type="text" name="max_lat" value="90" style="margin-top:0"></br> 
<input class="inp1" type="text" name="min_lon" value="-180"> <a>&emsp;~ <input class="inp1" type="text" name="max_lon" value="180"> <br>
<input class="inp2" type="text" name="min_lat" value="-90"> <br>
<p1>startTime &emsp;&emsp;&emsp;&emsp;&emsp;&emsp; endTime </br>
<input class="inp3" type="date" name="min_t" value="2010-01-01"> <a>&emsp;~ <input class="inp3" type="date" name="max_t" value="2021-12-31"> <br><br>
<p1>event type 
<!-- <input type="radio" id="stype1" name="stype" value="earthquake"> <label for="stype1">earthquake</label><br> -->
<!-- <input type="radio" id="stype2" name="stype" value=""> <label for="stype1">earthquake</label><br> -->
<?php
// connect to DB to generate selection automatically
include('connectionData.txt');
$conn = mysqli_connect($server, $user, $pass, $dbname, $port)
or die('Error connecting to MySQL server.');

// query manu_name for select options
$query = "SELECT DISTINCT(stype) FROM earthquake ;";
$result = mysqli_query($conn, $query)
or die(mysqli_error($conn));
// make select options
print "<select name='stype'>";
print "<optgroup label='event type'>";
while($row = mysqli_fetch_array($result, MYSQLI_BOTH))
  {
    print "<option>$row[stype]</option>";
  }
print "<option>All</option>";
print "</optgroup>";
print "</select>";
mysqli_free_result($result);
mysqli_close($conn);
?>
<br><br>
<input type="submit" value="submit">
<input type="reset" value="reset">
</form>
<br>
<hr>


<p>
Check available stations by seismic network code.

<?php
// connect to DB to generate selection automatically
include('connectionData.txt');
$conn = mysqli_connect($server, $user, $pass, $dbname, $port)
or die('Error connecting to MySQL server.');
// query manu_name for select options
$query = "SELECT code,DATE(startTime) AS startTime,description,ID FROM network;";
$result = mysqli_query($conn, $query)
or die(mysqli_error($conn));


// make select options
print "<form action='findStabyNet.php' method='POST'>";
print "<select name='ID'>";
print "<optgroup label='Network code'>";
while($row = mysqli_fetch_array($result, MYSQLI_BOTH))
  {
    if ($row[code]=='II'){
      print "<option value=$row[ID] selected>$row[code]: $row[startTime]: $row[description]</option>";
    }else{
      print "<option value=$row[ID]>$row[code]: $row[startTime]: $row[description]</option>";
    }
  }
print "</optgroup>";
print "</select>";
mysqli_free_result($result);
mysqli_close($conn);
print "<input type='submit' value='check stations' style='margin-left: 0.5em;'>";
print "</form>";
?>


<br>
<hr>

<p>
Search wave detections in a specific station.

<?php
// connect to DB to generate selection automatically
include('connectionData.txt');
$conn = mysqli_connect($server, $user, $pass, $dbname, $port)
or die('Error connecting to MySQL server.');
// query manu_name for select options
$query = "SELECT code,DATE(startTime) AS startTime,description,ID FROM network;";
$result = mysqli_query($conn, $query)
or die(mysqli_error($conn));

// make select options
print "<form action='findEQinSta.php' method='POST'>";
print "<select name='ID'>"; //value='PS: 1989-01-01: Pacific21'
print "<optgroup label='Network code'>";
while($row = mysqli_fetch_array($result, MYSQLI_BOTH))
  {
    if ($row[code]=='IU'){
      print "<option value=$row[ID] selected>$row[code]: $row[startTime]: $row[description]</option>";
    }else{
      print "<option value=$row[ID]>$row[code]: $row[startTime]: $row[description]</option>";
    }
  }
print "</optgroup>";
print "</select>";
mysqli_free_result($result);
mysqli_close($conn);
print "<br><br>";
print "<input class='inp1' type='text' name='station' value='ANMO' style='margin-left:0'>";
print "<input type='submit' value='submit' style='margin-left: 0.5em;'>";
print "</form>";
?>
<p>
<hr>



<p>
Search earthquake products.
<form action="findEQProduct.php" method="POST">
<p1>min. magnitude &emsp; max. magnitude </br>
<input class="inp1" type="text" name="min_mag" value="0.0"> <a>&emsp;~ <input class="inp1" type="text" name="max_mag" value="10.0"> <br>
<input type="checkbox" name="mt_flag" id="id1" value="mt_on">
<label for="id1"> Moment Tensor</label><br>
<input type="checkbox" name="ff_flag" id="id2" value="ff_on">
<label for="id2"> Finite Fault</label><br>
<br>
<input type="submit" value="submit">
<input type="reset" value="reset">
</form>


<p>
<hr>


<p>
Rank the network and find out the most valuable network.
<p>
* Note: the most valuable network is the network with maximum number of earthquake detections (if a network has many stations detecting on a same event, it only counts once).
<p>
* This implies that the network has good data quality and open-data.
<p>
* Querying from 8 million rows may take a few minutes, please wait while it's running.....
<form action="findValNet.php" method="POST">
<input type="submit" value="Check!">



<p>
<hr>


<p>
<a href="index.txt" >Contents</a> of this page.


</body>
</html>
